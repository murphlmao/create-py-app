// TODO: refactor main module code in here so main handles bare minimum (shell return code)